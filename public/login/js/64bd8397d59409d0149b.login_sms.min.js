webpackJsonp([32],{0:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){e.removeClass("modal-in"),e.css({display:"none"}),y.removeClass("active")}function r(e,t){var a="";if(c["default"].GetQueryString("WxNotBind")&&localStorage.callbacktype&&localStorage.callbackurl)"buynow"==localStorage.callbacktype?a=m+"./add_shopcart.html?type=buy":"settleaccounts"==localStorage.callbacktype&&(a=m+"./account.html");else if(c["default"].GetQueryString("jumpto")&&"settleaccounts"==c["default"].GetQueryString("jumpto"))a="./account.html";else if(c["default"].GetQueryString("from")&&"miaosha"==c["default"].GetQueryString("from"))a=m+"./activity/boqiishop20150901.html?source=h5";else if(c["default"].GetQueryString("jumpto")&&"buynow"==c["default"].GetQueryString("jumpto"))a="./add_shopcart.html?type=buy";else if(c["default"].GetQueryString("from")&&c["default"].GetQueryString("openid")&&"weixin"==c["default"].GetQueryString("from")){var o=c["default"].GetQueryString("openid");s(t),a=g+"/weixin/bind?openid="+o+"&username="+e}else if(c["default"].GetQueryString("from")&&c["default"].GetQueryString("from").indexOf("vetboqii")!=-1){s(t);var i=c["default"].GetQueryString("from").split("$");i.length>0?(i=i[1],i&&(a=decodeURIComponent(i))):a=v}else if(c["default"].GetQueryString("from")&&"vboqiiindex"==c["default"].GetQueryString("from"))s(t),a=v;else if(c["default"].GetQueryString("from")&&"gooddetailpage"==c["default"].GetQueryString("from"))a=decodeURIComponent(c["default"].GetQueryString("url"))+"&back=fav";else if(c["default"].GetQueryString("from")&&"activepage_app"==c["default"].GetQueryString("from")){var r=JSON.stringify(t);l(r,e,t.UserId)}else if(c["default"].GetQueryString("from")&&"activepage_h5"==c["default"].GetQueryString("from")){var n=localStorage.active_page_url+"&UserId="+t.UserId;window.location.href=n}else s(t),a="./personal.html";setTimeout(function(){window.location.href=a},300)}function l(e,t,a){var o="";w||b?(o="boqii://bqloginprotocol"+a+"bqloginprotocol",(0,u["default"])("#forms").attr("action",o),(0,u["default"])("#forms").submit(),alert(o)):Boqii.Login(e,t)}function n(e){localStorage.UserId=e.UserId;var t={UserId:e.UserId,NickName:e.NickName,Balance:e.Balance,HasPayPassword:e.HasPayPassword,Sex:e.Sex,Telephone:e.Telephone,AllOrderNum:e.AllOrderNum,UnpayOrderNum:e.UnpayOrderNum,PayedOrderNum:e.PayedOrderNum,BoqiiBean:e.BoqiiBean,VipLevel:e.VipLevel};localStorage.userProfile=c["default"].j2s(t)}function s(e){var t=location.href.match(/localhost|127\.0\.0\.1/)||location.port&&"80"!=location.port.toString()?null:".boqii.com";c["default"].storageInfo.set("vUserId",e.UserId,void 0,"/",t),c["default"].storageInfo.set("vHasPayPassword",e.HasPayPassword,void 0,"/",t),c["default"].storageInfo.set("vBalance",e.Balance,void 0,"/",t),c["default"].storageInfo.set("vTelephone",e.Telephone,void 0,"/",t)}var d=a(1),u=o(d),f=a(2),c=o(f),p=a(3);a(4),a(8),a(176);var m="../index.htm"/*tpa=http://s.boqii.com/*/,v="http://v.boqii.com/",g="http://api.boqii.com/v1.1";c["default"].isDevelopment()?(m="http://stest.boqii.com/",v="http://vtest.boqii.com/",g="http://api-dev.boqii.com/"):(m="../index.htm"/*tpa=http://s.boqii.com/*/,v="http://v.boqii.com/",g="http://api.boqii.com/");var y=(0,u["default"])(".overlay"),h=(0,u["default"])(".modal-normal");c["default"].isLocalStorageSupported()||(y.find(".modal-bd").html("请退出无痕浏览模式"),y.addClass("active"),h.animate({display:"block"},100,function(){(0,u["default"])(this).addClass("modal-in")})),(0,u["default"])(".left-btn").on("tap",function(){i(h)}),(0,u["default"])(".sina").on("tap",function(){window.location.href="https://api.weibo.com/oauth2/authorize?client_id=4030222662&redirect_uri=http%3A%2F%2F"+window.location.host+"%2FSinaWeibo%2Fapi%2Fcallback.php"+window.location.search+"&response_type=code"}),(0,u["default"])(".yzm_btn").tap(function(){var e=(0,u["default"])("[name=UserName]").val(),t=(0,u["default"])(".t_yzm").val();if(""==t)return void c["default"].createTips("请输入图形验证码");if(""==e)c["default"].createTips("请输入注册手机号");else if(c["default"].regExp.isMobil(e)){var a=120,o=(0,u["default"])(".yzm_btn");o.attr("disabled",!0).addClass("disabled");var i=setInterval(function(){a--,a<=0&&(clearInterval(i),o.attr("disabled",!1).removeClass("disabled").val("120秒后重新获取")),o.val(a+"秒后重新获取")},1e3),r={UDID:"123",Act:"SendAuthCode",Account:e,Type:5,ImgCode:t};u["default"].ajax({type:"post",dataType:"json",data:r,url:p.API.vet_online,beforeSend:function(){c["default"].createTips("获取验证码...")},success:function(e){0!=e.ResponseStatus&&c["default"].createTips(e.ResponseMsg)}})}else c["default"].createTips("手机号格式不正确")}),(0,u["default"])("#login_btn").click(function(){var e=(0,u["default"])("[name=UserName]").val(),t=(0,u["default"])("[name=AuthCode]").val(),a=!0;if(""==e?(c["default"].createTips("账户不可为空"),a=!1):""==t&&(c["default"].createTips("请输入手机验证码"),a=!1),a){localStorage.username=e;var o={Act:"LoginByAuthCode",UserName:e,AuthCode:t,AuthCodeType:5};u["default"].ajax({type:"post",dataType:"json",data:o,url:p.API.vet_online,success:function(t){0==t.ResponseStatus?(n(t.ResponseData),c["default"].GetQueryString("from")&&c["default"].GetQueryString("openid")&&"weixin"==c["default"].GetQueryString("from")?c["default"].createTips("账号绑定成功。"):c["default"].createTips("登录成功"),r(e,t.ResponseData)):t.ResponseStatus>0?c["default"].createTips(t.ResponseMsg):t.ResponseStatus<0&&c["default"].createTips("操作失败")}})}}),(0,u["default"])("#btnVoice").on("tap",function(){var e=(0,u["default"])("[name=UserName]").val();if(""==e)c["default"].createTips("请输入注册手机号");else if(c["default"].regExp.isMobil(e)){var t={Act:"SendVoiceForApp",Mobile:e,Type:5};u["default"].ajax({type:"post",dataType:"json",data:t,url:p.API.vet_online,beforeSend:function(){},success:function(e){0!=e.ResponseStatus?c["default"].createTips(e.ResponseMsg):(y.find(".modal-bd").html("语音验证码将通过电话语音的<br>形式告知您，请注意接听来电"),y.addClass("active"),h.animate({display:"block"},100,function(){(0,u["default"])(this).addClass("modal-in")}))}})}else c["default"].createTips("手机号格式不正确")});var S=navigator.userAgent,b=S.match(/(iPad).*OS\s([\d_]+)/),w=!b&&S.match(/(iPhone\sOS)\s([\d_]+)/),G=S.match(/(Android)\s+([\d.]+)/),Q=w||G;Q&&S.match(/micromessenger/i);(0,u["default"])(".isSee").tap(function(){(0,u["default"])(this).hasClass("active")?(0,u["default"])(this).removeClass("active").parents(".pass").find("[name=Password]").attr("type","password"):(0,u["default"])(this).addClass("active").parents(".pass").find("[name=Password]").attr("type","text")}),(0,u["default"])(".register_user").tap(function(){var e=c["default"].GetQueryString("vurl"),t=c["default"].GetQueryString("from");e?window.location.href="./reg.html?vurl="+e:window.location.href="./reg.html","miaosha"==t&&(window.location.href="./reg.html?from=miaosha")})},8:function(e,t){},176:function(e,t){}});